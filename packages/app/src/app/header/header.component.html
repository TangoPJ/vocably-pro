<header class="header" [class.mini]="mini">
  <div class="header-items">
    <div *ngIf="title" class="title">
      <app-back-button
        class="back middle mr-1"
        [label]="false"
      ></app-back-button>
      <span class="middle">{{ title }}</span>
    </div>
    <div class="logo" *ngIf="!title">
      <a [routerLink]="['/']" *ngIf="!mini"
        ><app-logo class="logo-image"></app-logo
      ></a>
      <app-logo class="logo-image" *ngIf="mini"></app-logo>
    </div>
    <div class="content" *ngIf="!mini">
      <div class="inline-block">
        <ng-content></ng-content>
      </div>
    </div>
    <div class="menu" [class.flex-0]="title" *ngIf="!mini">
      <button class="unstyled" id="menu-button">
        <ion-icon class="icon" name="menu-outline" size="large"></ion-icon>
      </button>
      <ion-popover trigger="menu-button" show-backdrop="false">
        <ng-template>
          <ion-content>
            <ion-list lines="none">
              <ng-container *ngIf="auth.userData$ | async as userData">
                <ion-item [button]="false"
                  ><ion-label class="light medium"
                    >Subscription status:
                    {{ userData | subscriptionStatus }}</ion-label
                  ></ion-item
                >
              </ng-container>
              <ion-item class="button-item" [button]="true" (click)="signOut()">
                <ion-label>Sign Out</ion-label>
              </ion-item>
            </ion-list>
          </ion-content>
        </ng-template>
      </ion-popover>
    </div>
  </div>
</header>
